<!doctype html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap-responsive.css">
	<link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
	<link type="text/javascript" href="js/bootstrap.js">
    <title>Exercise set 3</title>
</head>
<body>
    <div class="container">
    	<h1>Exercise set 3</h1>

    	<p class="lead">Two exercises to help you compile templates, and then put data on pages.</p>

        <h3>Example Code</h3>
        <ul>
            <li><a href="../examples/template_compiler.js">Template Compiler - looks in your <code>/templates</code> folder and wraps all files in a master template. Uses Underscore.js.</a></li>
            <li><a href="../examples/form_handler.js">Form Handler - listens for form data, assembles it into something you can handle.</a></li>
            <li><a href="../examples/async_programming.js">Async Programming - handles files, writes to a file and reads from a file asynchronously.</a></li>
        </ul>

        <h3>Templates</h3>
        <p>This server assembles several HTML files to make one webpage.</p>
        <ul>
            <li>Start with your solution from the Email Gatherer.</li>
            <li>We're going to begin by getting the default header and footer from a file instead.</li>
            <li>Save the HTML strings into files, called header.html and footer.html, then create a function that reads from those files.</li>
            <li>Create at least two files containing text that will go in between the header and footer HTML.</li>
            <li>Create a function that takes a path as an argument, and searches for an html file that matches the path. (EX if the path is "/index" then return the contents of a file called "index.html")</li>
            <li>Assemble the 3 files into a string, with the header at the beginning, the body file in the middle, and the footer file at the end.</li>
            <li>Serve the string as the response body.</li>
        </ul>

    	<h3>Sign-up and Log-in</h3>
        <p>In this exercise you'll be showing a user, logged in!</p>
        <ul>
            <li>Using the previous exercise and the text file from the email signup page, we're going to look for a querystring to show the appropriate user.</li>
            <li>Parse out the querystring, look for a parameter called 'user'.</li>
            <li>Read your "signup" file, find that user. Use name as the key- unless you thought ahead and assigned an ID. Underscore has many functions that can help with that.</li>
            <li>After you find the user, assemble a JavaScript Object with all the properties of the user.</li>
            <li>Add <code><%=user.name%></code> and any other user data you collected to the template somewhere. I suggest the name goes in the header.</li>
            <li>Use <code>_.template(page, user)</code> to compile the template and send it as the response.</li>
            <li><strong>Mega Bonus:</strong> Use the node module <code><a href="https://npmjs.org/package/cookies">cookies</a></code> to save the user that's logged in, and use a cookie instead of a querystring.</li>
            <li><strong>Ultra hyper bonus combo:</strong> Create another form that takes a user's id, and lets them set that cookie, so they can log in.</li>
        </ul>

    </div>
    <script>
        function showSolution(num) {
          if (confirm('You surrrrre?')) {
            document.getElementById('solution' + num).style.display = 'block';
          }
        }
    </script>
</body>
</html>
